{% extends 'base.html' %}

{% block content %}
<div class="container mx-auto mt-6">
    <h2 class="text-xl font-semibold mb-4">Update Request</h2>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <div class="grid grid-cols-2 gap-4">
            <!-- All Users Box -->
            <div class="bg-white rounded-lg shadow-md p-4">
                <h2 class="text-lg font-medium mb-4">All Users</h2>
                <ul class="divide-y divide-gray-200">
                    {% for user in all_users %}
                    <li class="py-2 flex items-center">
                        <span class="text-gray-500">{{ user.username }}</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Assigned Users Box -->
            <div class="bg-white rounded-lg shadow-md p-4">
                <h2 class="text-lg font-medium mb-4">Assigned Users</h2>
                <ul class="divide-y divide-gray-200">
                    {% for user in assigned_users %}
                    <li class="py-2 flex items-center">
                        <span class="text-gray-500">{{ user.username }}</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>


        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
            Save Changes
        </button>
    </form>
</div>

<script>
    // Get the "All Users" and "Assigned Users" boxes
    const allUsersBox = document.querySelector('#all-users-box');
    const assignedUsersBox = document.querySelector('#assigned-users-box');

    // Get all the user list items in the "All Users" box
    const allUsers = allUsersBox.querySelectorAll('li');

    // Add a click event listener to each "All Users" list item
    allUsers.forEach(user => {
        user.addEventListener('click', () => {
            // Remove the user from the "All Users" box
            user.remove();

            // Add the user to the "Assigned Users" box
            assignedUsersBox.querySelector('ul').appendChild(user);
        });
    });

    // Get all the user list items in the "Assigned Users" box
    const assignedUsers = assignedUsersBox.querySelectorAll('li');

    // Add a click event listener to each "Assigned Users" list item
    assignedUsers.forEach(user => {
        user.addEventListener('click', () => {
            // Remove the user from the "Assigned Users" box
            user.remove();

            // Add the user to the "All Users" box
            allUsersBox.querySelector('ul').appendChild(user);
        });
    });
</script>
{% endblock %}